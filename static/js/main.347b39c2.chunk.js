(this.webpackJsonpinstagram_clone=this.webpackJsonpinstagram_clone||[]).push([[0],{65:function(e,t,a){},66:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var s=a(2),n=a.n(s),c=a(18),i=a.n(c),o=(a(65),a(9)),l=(a(66),a(109)),r=a(43),d=a.n(r),j=a(108),m=a(106),u=a(57),b=a.n(u),p=a(56),O=a.n(p),h=a(24),x=h.a.initializeApp({apiKey:"AIzaSyAC9hO8YwdE9xszyiTTF5awZU3-PxYfed0",authDomain:"instagram-clone-aa0c4.firebaseapp.com",projectId:"instagram-clone-aa0c4",storageBucket:"instagram-clone-aa0c4.appspot.com",messagingSenderId:"299510752861",appId:"1:299510752861:web:4f1eb80f88ea5c5019cfb4"}).firestore(),g=h.a.auth(),_=h.a.storage(),f=a(3);var v=function(e){var t=Object(s.useState)([]),a=Object(o.a)(t,2),n=a[0],c=a[1],i=Object(s.useState)(0),r=Object(o.a)(i,2),u=r[0],p=r[1],g=Object(s.useState)(""),_=Object(o.a)(g,2),v=_[0],N=_[1];return Object(s.useEffect)((function(){e.postID&&x.collection("posts").doc(e.postID).collection("comments").orderBy("timeStamp","asc").onSnapshot((function(e){c(e.docs.map((function(e,t){return{id:e.id,text:e.data()}})))}))}),[e.postID]),setTimeout((function(){p(n.length)}),1e3),Object(f.jsxs)("div",{className:"post",children:[Object(f.jsxs)("div",{className:"post__header p-2",children:[Object(f.jsx)("span",{className:"header__avatar",children:Object(f.jsx)(l.a,{type:"button",alt:e.username,src:"/static/images/avatar/1.jpg"})}),Object(f.jsx)("strong",{className:"header__username",children:e.username})]}),Object(f.jsx)("div",{className:"post__image",children:e.imgUrl?Object(f.jsx)("img",{src:e.imgUrl,alt:"Failed to load",className:"image img-fluid"}):Object(f.jsx)("div",{className:"image__errorMsg",children:Object(f.jsxs)("p",{children:[Object(f.jsx)(d.a,{className:"image__errorMsg-icon"}),"Failed to load Image ",Object(f.jsx)("br",{})," Please check your connection"]})})}),Object(f.jsxs)("div",{className:"post__caption p-2",children:[Object(f.jsxs)("strong",{className:"caption__username",children:["@",e.username]}),Object(f.jsx)("span",{className:"caption__text",children:e.caption})]}),Object(f.jsxs)("div",{className:"post__show-comments",children:[Object(f.jsx)("div",{className:"show-comments__header",children:Object(f.jsxs)("strong",{children:[u," Comments"]})}),u?Object(f.jsx)("div",{className:"show-comments__allComments-wrapper",children:n.map((function(e){return Object(f.jsxs)("div",{className:"show-comments__single-comment",children:[Object(f.jsxs)("strong",{children:[e.text.username," "]}),Object(f.jsx)("br",{}),Object(f.jsx)("span",{children:e.text.comment})]},e.id)}))}):Object(f.jsx)("div",{className:"show-comments__emptyMsg",children:Object(f.jsxs)("p",{children:[Object(f.jsx)(O.a,{})," No Comments"]})})]}),Object(f.jsx)("div",{className:"post__commentBox",children:e.user?Object(f.jsxs)("form",{className:"commentBox__form",children:[Object(f.jsx)(j.a,{className:"commentBox__input",onChange:function(e){return N(e.target.value)},value:v,disableUnderline:!0,placeholder:"Write a comment"}),Object(f.jsx)(m.a,{type:"submit",className:"commentBox__button",color:"primary",disabled:!v,onClick:function(t){t.preventDefault(),x.collection("posts").doc(e.postID).collection("comments").add({username:e.user,comment:v,timeStamp:h.a.firestore.FieldValue.serverTimestamp()}),N("")},children:Object(f.jsx)(b.a,{className:"commentBox__button-icon"})})]}):Object(f.jsx)("div",{className:"text-center",children:Object(f.jsx)("p",{children:"Please login to comment on this post"})})})]})},N=a(104),C=a(107),y=a(110),S=a(105),w=a(47),I=a.n(w),U=a(48),B=a.n(U),k=a(58),F=a.n(k);function D(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}}var M=Object(N.a)((function(e){return{paper:{position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}));function P(e){var t=M(),a=n.a.useState(D),c=Object(o.a)(a,1)[0],i=n.a.useState(!1),l=Object(o.a)(i,2),r=l[0],d=l[1],u=Object(s.useState)(!1),b=Object(o.a)(u,2),p=b[0],O=b[1],h=Object(s.useState)(""),x=Object(o.a)(h,2),_=x[0],v=x[1],N=Object(s.useState)(""),w=Object(o.a)(N,2),U=w[0],k=w[1],P=Object(s.useState)(""),A=Object(o.a)(P,2),W=A[0],L=A[1],E=Object(s.useState)(null),T=Object(o.a)(E,2),z=T[0],Y=T[1],q=Object(s.useState)(!1),J=Object(o.a)(q,2),V=J[0],K=J[1],R=Object(s.useState)(""),Z=Object(o.a)(R,2),G=Z[0],H=Z[1];Object(s.useEffect)((function(){var e=g.onAuthStateChanged((function(e){Y(e||null)}));return function(){e()}}),[_,z]);return Object(f.jsxs)("div",{className:"modalContainer",children:[V?Object(f.jsx)(m.a,{className:"modalContainer__button",variant:"outlined",color:"secondary",onClick:function(){g.signOut(),K(!1)},endIcon:Object(f.jsx)(F.a,{}),children:"Log Out"}):Object(f.jsxs)("div",{className:"modalContainer__registerButton",children:[Object(f.jsx)(m.a,{className:"registerButton__signup",variant:"contained",color:"primary",onClick:function(){return d(!0)},children:"Sing Up"}),Object(f.jsx)(m.a,{className:"registerButton__login",variant:"contained",color:"inherit",onClick:function(){return O(!0)},children:"Log In"})]}),Object(f.jsx)(C.a,{className:"signup_modal",open:r,onClose:function(){return d(!1)},children:Object(f.jsxs)("div",{style:c,className:t.paper,children:[Object(f.jsx)("div",{className:"modalContainer__logo",children:Object(f.jsx)("img",{src:"/post_media/Images/insta_logo.jpg",alt:"Inta logo",className:"img-fluid logo_img"})}),Object(f.jsxs)("form",{className:"modalContainer__form",children:[Object(f.jsxs)("div",{className:"form__inputField",children:[Object(f.jsx)("div",{className:"inputField__userInput",children:Object(f.jsx)(j.a,{startAdornment:Object(f.jsx)(y.a,{position:"start",children:Object(f.jsx)(S.a,{})}),fullWidth:!0,placeholder:"Username",className:"ml-2",onChange:function(e){return v(e.target.value)},value:_})}),Object(f.jsx)("div",{className:"inputField__emailInput",children:Object(f.jsx)(j.a,{startAdornment:Object(f.jsx)(y.a,{position:"start",children:Object(f.jsx)(I.a,{})}),fullWidth:!0,placeholder:"Email",className:"ml-2",type:"email",onChange:function(e){return k(e.target.value)},value:U})}),Object(f.jsx)("div",{className:"inputField__passInput",children:Object(f.jsx)(j.a,{startAdornment:Object(f.jsx)(y.a,{variant:"outlined",position:"start",children:Object(f.jsx)(B.a,{})}),fullWidth:!0,placeholder:"Password",className:"ml-2",type:"password",onChange:function(e){return L(e.target.value)},value:W})})]}),Object(f.jsx)("div",{className:"form__submitButton text-right mt-4",children:Object(f.jsx)(m.a,{type:"submit",variant:"contained",color:"primary",onClick:function(e){e.preventDefault(),g.createUserWithEmailAndPassword(U,W).then((function(e){d(!1),K(!1),H("Signed Up Seccessfully! Please Login."),O(!0),document.querySelector("#for_setCheckLogin").focus(),e.user.updateProfile({displayName:_})})).catch((function(e){alert(e.message)})),L("")},children:"Sign Up"})})]})]})}),Object(f.jsx)(C.a,{className:"login_modal",open:p,onClose:function(){return O(!1)},children:Object(f.jsxs)("div",{style:c,className:t.paper,children:[Object(f.jsx)("div",{className:"modalContainer__logo",children:Object(f.jsx)("img",{src:"/post_media/Images/insta_logo.jpg",alt:"Inta logo",className:"img-fluid logo_img"})}),G?Object(f.jsx)("div",{className:"signedUp_msg mt-1 text-center text-success",children:Object(f.jsx)("p",{children:G})}):null,Object(f.jsxs)("form",{className:"modalContainer__form",children:[Object(f.jsxs)("div",{className:"form__inputField",children:[Object(f.jsx)("div",{className:"inputField__emailInput",children:Object(f.jsx)(j.a,{startAdornment:Object(f.jsx)(y.a,{position:"start",children:Object(f.jsx)(I.a,{})}),fullWidth:!0,placeholder:"Email",className:"ml-2",type:"email",onChange:function(e){return k(e.target.value)},value:U})}),Object(f.jsx)("div",{className:"inputField__passInput",children:Object(f.jsx)(j.a,{startAdornment:Object(f.jsx)(y.a,{variant:"outlined",position:"start",children:Object(f.jsx)(B.a,{})}),fullWidth:!0,placeholder:"Password",className:"ml-2",type:"password",onChange:function(e){return L(e.target.value)},value:W})})]}),Object(f.jsx)("div",{className:"form__submitButton text-right mt-4",children:Object(f.jsx)(m.a,{type:"submit",variant:"contained",color:"inherit",onClick:function(e){e.preventDefault(),g.signInWithEmailAndPassword(U,W).then((function(){O(!1),K(!0),document.querySelector("#for_setCheckLogin").focus()})).catch((function(e){return alert(e.message)})),v(""),k(""),L("")},children:"Log In"})})]})]})})]})}var A=a(103);var W=function(e){var t=Object(s.useState)(""),a=Object(o.a)(t,2),n=a[0],c=a[1],i=Object(s.useState)(null),l=Object(o.a)(i,2),r=l[0],d=l[1],u=Object(s.useState)(0),b=Object(o.a)(u,2),p=b[0],O=b[1],g=function(e){e.target.files[0]&&d(e.target.files[0])},v=function(t){t.preventDefault(),_.ref("files/".concat(r.name)).put(r).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);O(t)}),(function(e){console.log(e),alert(e.message)}),(function(){_.ref("files").child(r.name).getDownloadURL().then((function(t){x.collection("posts").add({caption:n,imgUrl:t,username:e.username,timeStamp:h.a.firestore.FieldValue.serverTimestamp()})})),O(0),c(""),d(null)}))};return p>0?Object(f.jsxs)("div",{className:"imgUpload text-center bg-white",children:[Object(f.jsxs)("div",{className:"imgUpload__progressBar",children:[Object(f.jsx)("progress",{value:p,max:"100"}),Object(f.jsxs)("span",{className:"parcentage",children:[p,"%"]})]}),Object(f.jsxs)("div",{className:"imgUpload__actOnUpload low_visibility",children:[Object(f.jsx)("div",{className:"imgUpload__choose-file",onChange:g,children:Object(f.jsx)(j.a,{fullWidth:!0,type:"file",disabled:!0})}),Object(f.jsxs)("div",{className:"imgUpload__caption my-4",children:[Object(f.jsx)(A.a,{className:"caption__inputBox",rowsMax:4,"aria-label":"maximum height",placeholder:"Write a Caption",onChange:function(e){return c(e.target.value)},value:n,disabled:!0}),Object(f.jsx)(m.a,{className:"caption__button",variant:"contained",onClick:v,disabled:!0,children:"Upload"})]}),Object(f.jsxs)("p",{className:"owener_name text-center m-0",children:["Created By ",Object(f.jsx)("strong",{children:"MD Omar"})]})]})]}):Object(f.jsxs)("div",{className:"imgUpload text-center bg-white",children:[Object(f.jsx)("div",{className:"imgUpload__choose-file",onChange:g,children:Object(f.jsx)(j.a,{fullWidth:!0,type:"file"})}),Object(f.jsxs)("div",{className:"imgUpload__caption my-4",children:[Object(f.jsx)(A.a,{className:"caption__inputBox",rowsMax:4,"aria-label":"maximum height",placeholder:"Write a Caption",onChange:function(e){return c(e.target.value)},value:n}),Object(f.jsx)(m.a,{className:"caption__button",variant:"contained",onClick:v,children:"Upload"})]}),Object(f.jsxs)("p",{className:"owener_name text-center m-0",children:["Created By ",Object(f.jsx)("strong",{children:"MD Omar"})]})]})};var L=function(){return Object(f.jsxs)("div",{className:"lds-facebook",children:[Object(f.jsx)("div",{}),Object(f.jsx)("div",{}),Object(f.jsx)("div",{})]})};var E=function(){var e=Object(s.useState)([]),t=Object(o.a)(e,2),a=t[0],n=t[1],c=Object(s.useState)(!1),i=Object(o.a)(c,2),l=i[0],r=i[1],j=Object(s.useState)(""),m=Object(o.a)(j,2),u=m[0],b=m[1],p=Object(s.useState)(null),O=Object(o.a)(p,2),h=O[0],_=O[1],N=Object(s.useState)(!1),C=Object(o.a)(N,2),y=C[0],S=C[1];return Object(s.useEffect)((function(){g.onAuthStateChanged((function(e){e?(b(e.displayName),S(!1)):b(null)})),x.collection("posts").orderBy("timeStamp","desc").onSnapshot((function(e){n(e.docs.map((function(e){return{id:e.id,posts:e.data()}}))),r(!0)})),_(window.navigator.onLine)}),[y]),Object(f.jsxs)("div",{className:"app container-fluid",children:[Object(f.jsx)("input",{id:"for_setCheckLogin",onFocus:function(){S(!0),console.log("focused")}}),Object(f.jsxs)("div",{className:"app__header p-2",children:[Object(f.jsx)("h3",{className:"header__title",children:"Post Media"}),Object(f.jsx)(P,{})]}),Object(f.jsx)("div",{className:"app__body row container-fluid",children:h?Object(f.jsx)("div",{className:"app__posts col-10 col-md-10 col-lg-4",children:l?Object(f.jsx)("div",{children:a.map((function(e){return Object(f.jsx)(v,{username:e.posts.username,imgUrl:e.posts.imgUrl,caption:e.posts.caption,postID:e.id,user:u},e.id)}))}):Object(f.jsx)("div",{className:"posts__loading-spinner",children:Object(f.jsx)(L,{})})}):Object(f.jsxs)("h1",{className:"app__body-offlineMsg mx-auto",children:[Object(f.jsx)(d.a,{className:"offlineMsg__icon"})," No Internet Connection !!"]})}),h?Object(f.jsx)("div",{className:"app__upload container-fluid",children:u?Object(f.jsx)(W,{username:u}):Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{children:"You need to login for Posting"}),Object(f.jsxs)("p",{className:"upload__owener-name text-center",children:["Created By ",Object(f.jsx)("strong",{children:"MD Omar"})]})]})}):null]})},T=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,112)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,c=t.getLCP,i=t.getTTFB;a(e),s(e),n(e),c(e),i(e)}))};i.a.render(Object(f.jsx)(n.a.StrictMode,{children:Object(f.jsx)(E,{})}),document.getElementById("root")),T()}},[[77,1,2]]]);
//# sourceMappingURL=main.347b39c2.chunk.js.map