(this.webpackJsonpinstagram_clone=this.webpackJsonpinstagram_clone||[]).push([[0],{71:function(e,t,a){},72:function(e,t,a){},84:function(e,t,a){"use strict";a.r(t);var n=a(2),s=a.n(n),c=a(18),i=a.n(c),o=(a(71),a(10)),r=(a(72),a(116)),l=a(46),d=a.n(l),j=a(115),m=a(113),u=a(61),b=a.n(u),p=a(60),O=a.n(p),h=a(29),g=h.a.initializeApp({apiKey:"AIzaSyAC9hO8YwdE9xszyiTTF5awZU3-PxYfed0",authDomain:"instagram-clone-aa0c4.firebaseapp.com",projectId:"instagram-clone-aa0c4",storageBucket:"instagram-clone-aa0c4.appspot.com",messagingSenderId:"299510752861",appId:"1:299510752861:web:4f1eb80f88ea5c5019cfb4"}).firestore(),x=h.a.auth(),_=h.a.storage(),f=a(23),v=a(3);var N=function(e){var t=Object(f.c)((function(e){return e})).currentUser,a=Object(n.useState)([]),s=Object(o.a)(a,2),c=s[0],i=s[1],l=Object(n.useState)(0),u=Object(o.a)(l,2),p=u[0],x=u[1],_=Object(n.useState)(""),N=Object(o.a)(_,2),C=N[0],y=N[1],I=Object(n.useState)(""),S=Object(o.a)(I,2),U=S[0],w=S[1];return Object(n.useEffect)((function(){w(t.username)}),[t]),Object(n.useEffect)((function(){e.postID&&g.collection("posts").doc(e.postID).collection("comments").orderBy("timeStamp","asc").onSnapshot((function(e){i(e.docs.map((function(e,t){return{id:e.id,text:e.data()}})))}))}),[e.postID]),Object(n.useEffect)((function(){x(c.length)}),[c]),Object(v.jsxs)("div",{className:"post",children:[Object(v.jsxs)("div",{className:"post__header p-2",children:[Object(v.jsx)("span",{className:"header__avatar",children:Object(v.jsx)(r.a,{type:"button",alt:e.username,src:"/static/images/avatar/1.jpg"})}),Object(v.jsx)("strong",{className:"header__username",children:e.username})]}),Object(v.jsx)("div",{className:"post__image",children:e.imgUrl?Object(v.jsx)("img",{src:e.imgUrl,alt:"Failed to load",className:"image img-fluid"}):Object(v.jsx)("div",{className:"image__errorMsg",children:Object(v.jsxs)("p",{children:[Object(v.jsx)(d.a,{className:"image__errorMsg-icon"}),"Failed to load Image ",Object(v.jsx)("br",{})," Please check your connection"]})})}),Object(v.jsxs)("div",{className:"post__caption p-2",children:[Object(v.jsxs)("strong",{className:"caption__username",children:["@",e.username]}),Object(v.jsx)("span",{className:"caption__text",children:e.caption})]}),Object(v.jsxs)("div",{className:"post__show-comments",children:[Object(v.jsx)("div",{className:"show-comments__header",children:Object(v.jsxs)("strong",{children:[p," Comments"]})}),p?Object(v.jsx)("div",{className:"show-comments__allComments-wrapper",children:c.map((function(e){return Object(v.jsxs)("div",{className:"show-comments__single-comment",children:[Object(v.jsxs)("strong",{children:[e.text.username," "]}),Object(v.jsx)("br",{}),Object(v.jsx)("span",{children:e.text.comment})]},e.id)}))}):Object(v.jsx)("div",{className:"show-comments__emptyMsg",children:Object(v.jsxs)("p",{children:[Object(v.jsx)(O.a,{})," No Comments"]})})]}),Object(v.jsx)("div",{className:"post__commentBox",children:t.loggedIn?Object(v.jsxs)("form",{className:"commentBox__form",children:[Object(v.jsx)(j.a,{className:"commentBox__input",onChange:function(e){return y(e.target.value)},value:C,disableUnderline:!0,placeholder:"Write a comment"}),Object(v.jsx)(m.a,{type:"submit",className:"commentBox__button",color:"primary",disabled:!C,onClick:function(t){t.preventDefault(),g.collection("posts").doc(e.postID).collection("comments").add({username:U,comment:C,timeStamp:h.a.firestore.FieldValue.serverTimestamp()}),y("")},children:Object(v.jsx)(b.a,{className:"commentBox__button-icon"})})]}):Object(v.jsx)("div",{className:"text-center",children:Object(v.jsx)("p",{children:"Please login to comment on this post"})})})]})},C=a(111),y=a(114),I=a(117),S=a(112),U=a(51),w=a.n(U),B=a(52),k=a.n(B),E=a(62),F=a.n(E),D=function(e){return{type:"SET_CURRENT_USER",username:e.username,isLoggedIn:e.setLoggedIn}};function L(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}}var M=Object(C.a)((function(e){return{paper:{position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}));function P(e){var t=Object(f.c)((function(e){return e})).currentUser;console.log(t);var a=Object(f.b)(),c=M(),i=s.a.useState(L),r=Object(o.a)(i,1)[0],l=s.a.useState(!1),d=Object(o.a)(l,2),u=d[0],b=d[1],p=Object(n.useState)(!1),O=Object(o.a)(p,2),h=O[0],g=O[1],_=Object(n.useState)(""),N=Object(o.a)(_,2),C=N[0],U=N[1],B=Object(n.useState)(""),E=Object(o.a)(B,2),P=E[0],W=E[1],A=Object(n.useState)(""),T=Object(o.a)(A,2),R=T[0],z=T[1],Y=Object(n.useState)(""),J=Object(o.a)(Y,2),V=J[0],K=J[1];Object(n.useEffect)((function(){var e=x.onAuthStateChanged((function(e){a(D(e?{username:e.displayName,setLoggedIn:!0}:{username:"unknown",setLoggedIn:!1}))}));return function(){e()}}),[]);return Object(v.jsxs)("div",{className:"modalContainer",children:[t.loggedIn?Object(v.jsx)(m.a,{className:"modalContainer__button",variant:"outlined",color:"secondary",onClick:function(){x.signOut()},endIcon:Object(v.jsx)(F.a,{}),children:"Log Out"}):Object(v.jsxs)("div",{className:"modalContainer__registerButton",children:[Object(v.jsx)(m.a,{className:"registerButton__signup",variant:"contained",color:"primary",onClick:function(){return b(!0)},children:"Sing Up"}),Object(v.jsx)(m.a,{className:"registerButton__login",variant:"contained",color:"inherit",onClick:function(){return g(!0)},children:"Log In"})]}),Object(v.jsx)(y.a,{className:"signup_modal",open:u,onClose:function(){return b(!1)},children:Object(v.jsxs)("div",{style:r,className:c.paper,children:[Object(v.jsx)("div",{className:"modalContainer__logo",children:Object(v.jsx)("img",{src:"/post_media/Images/insta_logo.jpg",alt:"Inta logo",className:"img-fluid logo_img"})}),Object(v.jsxs)("form",{className:"modalContainer__form",children:[Object(v.jsxs)("div",{className:"form__inputField",children:[Object(v.jsx)("div",{className:"inputField__userInput",children:Object(v.jsx)(j.a,{startAdornment:Object(v.jsx)(I.a,{position:"start",children:Object(v.jsx)(S.a,{})}),fullWidth:!0,placeholder:"Username",className:"ml-2",onChange:function(e){return U(e.target.value)},value:C})}),Object(v.jsx)("div",{className:"inputField__emailInput",children:Object(v.jsx)(j.a,{startAdornment:Object(v.jsx)(I.a,{position:"start",children:Object(v.jsx)(w.a,{})}),fullWidth:!0,placeholder:"Email",className:"ml-2",type:"email",onChange:function(e){return W(e.target.value)},value:P})}),Object(v.jsx)("div",{className:"inputField__passInput",children:Object(v.jsx)(j.a,{startAdornment:Object(v.jsx)(I.a,{variant:"outlined",position:"start",children:Object(v.jsx)(k.a,{})}),fullWidth:!0,placeholder:"Password",className:"ml-2",type:"password",onChange:function(e){return z(e.target.value)},value:R})})]}),Object(v.jsx)("div",{className:"form__submitButton text-right mt-4",children:Object(v.jsx)(m.a,{type:"submit",variant:"contained",color:"primary",onClick:function(e){e.preventDefault(),x.createUserWithEmailAndPassword(P,R).then((function(e){e.user.updateProfile({displayName:C}),a(D({username:C,setLoggedIn:!0})),b(!1),U(""),W(""),z(""),K("Signed Up Seccessfully! Please Login.")})).catch((function(e){alert(e.message)})),z("")},children:"Sign Up"})})]})]})}),Object(v.jsx)(y.a,{className:"login_modal",open:h,onClose:function(){return g(!1)},children:Object(v.jsxs)("div",{style:r,className:c.paper,children:[Object(v.jsx)("div",{className:"modalContainer__logo",children:Object(v.jsx)("img",{src:"/post_media/Images/insta_logo.jpg",alt:"Inta logo",className:"img-fluid logo_img"})}),V?Object(v.jsx)("div",{className:"signedUp_msg mt-1 text-center text-success",children:Object(v.jsx)("p",{children:V})}):null,Object(v.jsxs)("form",{className:"modalContainer__form",children:[Object(v.jsxs)("div",{className:"form__inputField",children:[Object(v.jsx)("div",{className:"inputField__emailInput",children:Object(v.jsx)(j.a,{startAdornment:Object(v.jsx)(I.a,{position:"start",children:Object(v.jsx)(w.a,{})}),fullWidth:!0,placeholder:"Email",className:"ml-2",type:"email",onChange:function(e){return W(e.target.value)},value:P})}),Object(v.jsx)("div",{className:"inputField__passInput",children:Object(v.jsx)(j.a,{startAdornment:Object(v.jsx)(I.a,{variant:"outlined",position:"start",children:Object(v.jsx)(k.a,{})}),fullWidth:!0,placeholder:"Password",className:"ml-2",type:"password",onChange:function(e){return z(e.target.value)},value:R})})]}),Object(v.jsx)("div",{className:"form__submitButton text-right mt-4",children:Object(v.jsx)(m.a,{type:"submit",variant:"contained",color:"inherit",onClick:function(e){e.preventDefault(),x.signInWithEmailAndPassword(P,R).then((function(){g(!1)})).catch((function(e){return alert(e.message)})),U(""),W(""),z("")},children:"Log In"})})]})]})})]})}var W=a(110),A=a(64),T=a.n(A),R=a(63),z=a.n(R);var Y=function(e){var t=Object(f.c)((function(e){return e})).currentUser,a=Object(n.useState)(""),s=Object(o.a)(a,2),c=s[0],i=s[1],r=Object(n.useState)(null),l=Object(o.a)(r,2),d=l[0],u=l[1],b=Object(n.useState)(0),p=Object(o.a)(b,2),O=p[0],x=p[1],N=Object(n.useState)(!0),C=Object(o.a)(N,2),y=C[0],I=C[1],S=Object(n.useState)(""),U=Object(o.a)(S,2),w=(U[0],U[1]),B=Object(n.useRef)(null);Object(n.useEffect)((function(){t&&w(t.username)}),[t]);var k=function(e){e.target.files[0]&&u(e.target.files[0])},E=function(t){t.preventDefault(),_.ref("files/".concat(d.name)).put(d).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);x(t)}),(function(e){console.log(e),alert(e.message)}),(function(){_.ref("files").child(d.name).getDownloadURL().then((function(t){g.collection("posts").add({caption:c,imgUrl:t,username:e.username,timeStamp:h.a.firestore.FieldValue.serverTimestamp()})})),x(0),i(""),u(null)}))};return O>0?Object(v.jsxs)("div",{className:"imgUpload text-center bg-white",children:[Object(v.jsxs)("div",{className:"imgUpload__progressBar",children:[Object(v.jsx)("progress",{value:O,max:"100"}),Object(v.jsxs)("span",{className:"parcentage ml-2",children:[O,"%"]})]}),Object(v.jsxs)("div",{className:"imgUpload__actOnUpload low_visibility",children:[Object(v.jsx)("div",{className:"imgUpload__choose-file",onChange:k,children:Object(v.jsx)(j.a,{fullWidth:!0,type:"file",disabled:!0})}),Object(v.jsxs)("div",{className:"imgUpload__caption my-4",children:[Object(v.jsx)(W.a,{className:"caption__inputBox",rowsMax:4,"aria-label":"maximum height",placeholder:"Write a Caption",onChange:function(e){return i(e.target.value)},value:c,disabled:!0}),Object(v.jsx)(m.a,{className:"caption__button",variant:"contained",onClick:E,disabled:!0,children:"Upload"})]})]}),Object(v.jsxs)("p",{className:"owener_name text-center m-0",children:["Created By ",Object(v.jsx)("strong",{children:"MD Omar"})]})]}):Object(v.jsxs)("div",{className:"imgUpload text-center bg-white",children:[Object(v.jsx)("div",{className:"imgUpload__upIcon rounded-pill",onClick:function(){y?(I(!1),B.current.style.display="none"):(I(!0),B.current.style.display="initial")},children:y?Object(v.jsx)(z.a,{}):Object(v.jsx)(T.a,{})}),Object(v.jsxs)("div",{ref:B,className:"actOnIconClick",children:[Object(v.jsx)("div",{className:"imgUpload__choose-file",onChange:k,children:Object(v.jsx)(j.a,{fullWidth:!0,type:"file"})}),Object(v.jsxs)("div",{className:"imgUpload__caption my-4",children:[Object(v.jsx)(W.a,{className:"caption__inputBox",rowsMax:4,"aria-label":"maximum height",placeholder:"Write a Caption",onChange:function(e){return i(e.target.value)},value:c}),Object(v.jsx)(m.a,{className:"caption__button",variant:"contained",onClick:E,children:"Upload"})]})]}),Object(v.jsxs)("p",{className:"owener_name text-center m-0",children:["Created By ",Object(v.jsx)("strong",{children:"MD Omar"})]})]})};var J=function(){return Object(v.jsxs)("div",{className:"lds-facebook",children:[Object(v.jsx)("div",{}),Object(v.jsx)("div",{}),Object(v.jsx)("div",{})]})};var V=function(){var e=Object(f.c)((function(e){return e})).currentUser,t=Object(n.useState)([]),a=Object(o.a)(t,2),s=a[0],c=a[1],i=Object(n.useState)(!1),r=Object(o.a)(i,2),l=r[0],j=r[1],m=Object(n.useState)(null),u=Object(o.a)(m,2),b=u[0],p=u[1];return Object(n.useEffect)((function(){g.collection("posts").orderBy("timeStamp","desc").onSnapshot((function(e){c(e.docs.map((function(e){return{id:e.id,posts:e.data()}}))),j(!0)})),p(window.navigator.onLine)}),[]),Object(v.jsxs)("div",{className:"app container-fluid",children:[Object(v.jsxs)("div",{className:"app__header p-2",children:[Object(v.jsx)("h3",{className:"header__title",children:"Post Media"}),Object(v.jsx)(P,{})]}),Object(v.jsx)("div",{className:"app__body row container-fluid",children:b?Object(v.jsx)("div",{className:"app__posts col-10 col-md-10 col-lg-4",children:l?Object(v.jsx)("div",{children:s.map((function(e){return Object(v.jsx)(N,{username:e.posts.username,imgUrl:e.posts.imgUrl,caption:e.posts.caption,postID:e.id},e.id)}))}):Object(v.jsx)("div",{className:"posts__loading-spinner",children:Object(v.jsx)(J,{})})}):Object(v.jsxs)("h1",{className:"app__body-offlineMsg mx-auto",children:[Object(v.jsx)(d.a,{className:"offlineMsg__icon"})," No Internet Connection !!"]})}),b?Object(v.jsx)("div",{className:"app__upload container-fluid",children:e.loggedIn?Object(v.jsx)(Y,{}):Object(v.jsxs)("div",{children:[Object(v.jsx)("h1",{children:"You need to login for Posting"}),Object(v.jsxs)("p",{className:"upload__owener-name text-center",children:["Created By ",Object(v.jsx)("strong",{children:"MD Omar"})]})]})}):null]})},K=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,119)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,c=t.getLCP,i=t.getTTFB;a(e),n(e),s(e),c(e),i(e)}))},Z=a(48),q={username:"unknown",loggedIn:!1},G=Object(Z.a)({currentUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;return"SET_CURRENT_USER"===t.type&&t.username?{username:t.username,loggedIn:t.isLoggedIn}:e}}),H=Object(Z.b)(G);i.a.render(Object(v.jsx)(s.a.StrictMode,{children:Object(v.jsx)(f.a,{store:H,children:Object(v.jsx)(V,{})})}),document.getElementById("root")),K()}},[[84,1,2]]]);
//# sourceMappingURL=main.f65a8028.chunk.js.map